# ContribTracker

一个用于追踪玩家贡献的Minecraft Fabric服务器模组。

## 功能特点

- 支持离线玩家贡献记录
- 贡献位置追踪
- 贡献邀请5分钟过期机制
- 多层次贡献者权限管理
- 贡献类型快速选择（redstone、building、landmark、other）

## 安装

1. 将模组放入服务器的`mods`文件夹
2. 重启服务器

## 命令使用

### 1. 创建贡献

通过类型创建：

```a
/contribtracker add <type> <name>
```

支持的类型：

- redstone（红石）
- building（建筑）
- landmark（地标）
- other（其他）

### 2. 添加贡献者/发送邀请

```a
/contribtracker add <贡献ID> <玩家名>
```

功能说明：

1. 对于管理员、创建者和一级贡献者：
   - 可以直接添加贡献者
   - 支持添加离线玩家
   - 被添加的玩家自动成为添加者的下级

2. 对于二级及以下贡献者：
   - 只能发送邀请
   - 只能邀请在线玩家
   - 邀请有效期为5分钟

### 3. 删除贡献

```a
/contribtracker delete <贡献ID>
```

注意：

- 管理员可以删除任何贡献
- 普通玩家只能删除自己创建的贡献

### 4. 删除贡献者

```a
/contribtracker remove <贡献ID> <玩家名>
```

注意：

- 管理员和创建者可以删除该贡献下的所有玩家
- 普通贡献者只能删除自己邀请的玩家

### 5. 查看所有贡献

```a
/contribtracker list
```

显示所有贡献，格式：

```a
ID | 贡献类型 | 贡献名称 | 创建人 | 坐标
```

### 6. 查看附近贡献

```a
/contribtracker near
```

或简写形式：

```a
/contribtracker n
```

显示半径32格内的所有贡献，格式同上。

### 7. 接受/拒绝邀请

```a
/contribtracker accept <贡献ID>
/contribtracker reject <贡献ID>
```

- 用于处理收到的贡献邀请
- 邀请有效期为5分钟

## 权限层级

贡献者权限系统采用多层级设计：

1. 管理员（最高权限）
   - 可以删除任何贡献
   - 可以删除任何贡献者
   - 可以直接添加任何玩家为贡献者

2. 贡献创建者（一级贡献者）
   - 可以删除自己的贡献
   - 可以删除任何贡献者
   - 可以直接添加任何玩家为贡献者

3. 二级及以下贡献者
   - 只能发送邀请
   - 只能删除自己邀请的贡献者

## 数据库

使用SQLite数据库存储数据，数据库文件位于服务器的`config/null_city/contributions/contributions.db`。

## 注意事项

1. 贡献创建者自动成为一级贡献者
2. 贡献邀请5分钟后自动过期
3. 贡献者只能管理自己邀请的下级贡献者
4. 每个贡献者都有一个层级值，表示其在贡献中的权限级别
5. 管理员和一级贡献者可以直接添加贡献者，无需邀请流程
