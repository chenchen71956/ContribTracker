# 贡献追踪器 (ContribTracker)

这是一个Minecraft Fabric服务端mod，用于追踪和记录玩家在服务器上的贡献。

## 功能特点

- 记录玩家在服务器上的各种贡献（红石、建筑、标点等）
- 提供HTTP API接口查询贡献信息
- 支持多人协作贡献
- 支持离线玩家贡献记录
- 支持贡献位置追踪
- 贡献邀请5分钟过期机制
- 贡献者权限管理

## 安装说明

1. 确保服务器已安装Fabric Loader
2. 将mod文件放入服务器的`mods`文件夹
3. 重启服务器

## 命令使用

### 记录贡献

```a
/contribtracker <类型> <贡献名称> <游戏ID> <注释>
```

- 类型：红石/建筑/标点/其他
- 贡献名称：贡献的名称
- 游戏ID：可选，用于绑定离线玩家
- 注释：说明你在这个贡献中做了什么

### 参与贡献

当收到贡献通知时：

1. 你会看到消息："你周围刚刚有人发布了一个新的贡献"
2. 选择"我参与啦"或"与我无关"
3. 如果选择"我参与啦"，输入：

```a
/contribtracker <你为此次内容贡献了什么?>
```

- 只需要输入你在这个贡献中做了什么
- 其他信息会自动从原始贡献中获取
- 邀请将在5分钟后过期

### 查看附近贡献

```a
/contribtracker n
```

显示半径32格内的所有贡献，格式：

```a
| 贡献ID | 贡献名 | 创建人 |
```

### 删除贡献

```a
/contribtracker delete <贡献ID>
```

- 只有贡献的创建者和管理员可以删除贡献

### 删除贡献者

```a
/contribtracker remove <贡献ID> <玩家名>
```

- 只有贡献的创建者和管理员可以删除贡献者

### 邀请新成员

```a
/contribtracker invite <玩家名> <贡献名称>
```

- 只有贡献者可以邀请新成员
- 被邀请的玩家会收到贡献邀请
- 邀请同样有5分钟过期时间

## HTTP API

### 获取贡献者列表

```a
GET /api/contributors
```

### 获取所有贡献列表

```a
GET /api/contributions
```

### 获取单个贡献者贡献列表

```a
GET /api/contributions/:playerId
```

### 获取单个资源详细信息

```a
GET /api/contributions/details/:contributionId
```

## 数据库

mod使用SQLite数据库存储数据，数据库文件位于服务器根目录下的`contributions.db`。

## 注意事项

- 这是一个服务端mod，客户端安装无效
- 需要管理员权限才能删除贡献
- 贡献位置信息会保存在数据库中
- HTTP服务器默认运行在8080端口
- 贡献邀请会在5分钟后自动过期
- 只有贡献的创建者和管理员有权限删除贡献和贡献者
