# ContribTracker 项目文档

## 项目概述

ContribTracker是一个Minecraft Fabric服务器模组，用于追踪和管理玩家在服务器中的各类贡献。通过多层级权限系统和WebSocket接口，实现了贡献数据的实时同步和多维度管理。

## 主要功能

- 支持多种贡献类型（红石、建筑、地标、其他）
- 多层级权限管理系统
- 贡献位置追踪和搜索
- 贡献邀请及管理机制
- WebSocket实时数据同步

## 技术架构

- Minecraft Fabric模组框架
- SQLite数据库（使用HikariCP连接池）
- WebSocket服务器
- 多线程异步处理
- 数据缓存机制

## 系统性能优化

为保证服务器性能，ContribTracker实现了以下优化：

1. **异步处理机制**
   - 所有耗时操作在工作线程池执行
   - 避免在主线程执行数据库和网络操作

2. **高效数据库访问**
   - HikariCP连接池管理
   - 预编译SQL语句
   - WAL模式提高写入性能
   - 批量处理降低数据库开销

3. **数据缓存系统**
   - 主要查询结果缓存
   - 智能缓存过期策略
   - 减少频繁数据库访问

4. **网络通信优化**
   - 批次处理WebSocket消息
   - 心跳机制维护连接状态
   - 减少不必要的数据同步

## 系统配置

配置文件位于`config/null_city/contributions/websocket.yml`，可配置以下参数：

- WebSocket服务器端口和路径
- 缓存设置
- 数据库路径

## 性能监控

模组提供了性能监控日志，记录关键操作执行时间，可通过日志系统查看资源使用情况。 